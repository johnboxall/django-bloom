#labels Phase-Deploy,Featured
# bloom-device is a pluggable Django application for device detection using Device Atlas.

=Introduction=
bloom-device uses [http://deviceatlas.com/ Device Atlas] to detect the browsing device from `request.META['HTTP_USER_AGENT']`. bloom-device modifies the `request` object, adding the dictionary `request.device` which contains attributes pulled from Device Atlas.

For example:

{{{
>>> request.META['HTTP_USER_AGENT']

'SonyEricssonW850i/R1GB Browser/NetFront/3.3 Profile/MIDP-2.0 Configuration/CLDC-1.1'

>>> request.device

{u'mobileDevice': '1', u'displayWidth': '240', u'displayHeight': '320', u'vendor': 'Sony Ericsson',  u'model': 'W850i', ...}
}}}

Device detection can be used either on all requests through `bloom.device.middleware.DeviceDetectMiddleware` or applied to individual views with the decorator function `bloom.device.decorators.detect_device`.

==Installation Overview==
 
* Install Device Atlas Python API

* Install Device Atlas JSON library file

* Install Device Atlas dependency `simplejson`

* Add `bloom.device` to `INSTALLED_APPS`

* Add `bloom.device.middleware.DeviceDetectMiddleware` to `MIDDLEWARE_CLASSES`

* Or `bloom.device.decorators.detect_device` on a view

==Installation Guide==

To use bloom-device you will first need to install the Device Atlas Python API and download the Device Atlas JSON library file. 

[http://deviceatlas.com/downloads Download the Device Atlas Python API here]. *You will need to sign up for dev.mobi to download the API*. At the time of writing the Device Atlas Python API has not been packaged using setuptools or distutils so you will have to unzip the file into your site-packages directory yourself. If you're unsure where you site-packages directory is use this command:

{{{python -c "from distutils.sysconfig import get_python_lib; print get_python_lib()"}}}

*Move the Device Atlas API zip to your site-packages into a folder called `deviceatlas`* 

To use Device Atlas we'll need to install it's dependencies.

{{{easy_install simplejson}}}

To see if your installation was successful


To use bloom-device: 

  * Add `bloom.device` to your `INSTALLED_APPS`:

{{{
INSTALLED_APPS = (
    ...
    bloom.device,
    ...
)
}}}

  * Add `bloom.device.middleware.DeviceDetectMiddleware` to `MIDDLEWARE_CLASSES`. `request.device` will then be available in all views.:

{{{
MIDDLEWARE_CLASSES = (
    ...
    'bloom.device.middleware.DeviceDetectMiddleware',
    ...
)
}}}

  * Use the `bloom.device.decorators.detect_device` on a view. `request.device` will then be available in that view:

{{{

from bloom.device.decorators import detect_device

@detect_device
def my_view(request):
    print request.device
    ...
}}}